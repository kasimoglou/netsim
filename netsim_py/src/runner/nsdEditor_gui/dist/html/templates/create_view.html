<div class="row">
    <div class="col-md-12">
        <form novalidate class="new-nsd-form">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="name" class="control-label">Dataset Name:</label>
                        <input type="text" ng-model="view.name"
                            class="form-control" id="name" placeholder="name your view"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="base_datasets" class="control-label">Base datasets:</label>
                        <multiselect multiple="true" ng-model="view.base_tables" class="full-width hide-filter hide-check-buttons"
                                     options="bd.name for bd in base_datasets"
                                     ng-change="updateAvailableFields()"></multiselect>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="table_filter" class="control-label">Filtering:</label>
                        <input type="text" ng-model="view.table_filter" class="form-control"
                               id="table_filter" placeholder="filter expression"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label class="control-label">Available Fields:</label>
                </div>
            </div>
            <div class="row">
                <div class=" col-md-12" ng-show="available_fields.length > 0">
                    <div class="row" ng-repeat="af in available_fields">
                        <div class="col-md-3">
                            <h5><strong>[[af.name]]</strong>: </h5>
                        </div>
                        <div class="col-md-9">
                            <span class="h5 available-field" ng-repeat="field in af.columns">[[field.name]]</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" ng-show="available_fields.length === 0">
                    <h5>You have not selected any dataset</h5>
                </div>
            </div>
            <div class="row top10">
                <div class="col-md-12">
                    <label class="control-label">Fields:</label>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <a class="btn btn-primary pull-right" ng-click="addField()">Add</a>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="gridStyle" ng-grid="gridOptions"></div>
                </div>
            </div>
            <div class="ng-dialog-buttons row">
                <div class="col-md-12">
                    <a class="btn btn-sm btn-success" ng-click="createView()" ng-show="!mode.update">Create</a>
                    <a class="btn btn-sm btn-success" ng-click="updateView()" ng-show="mode.update">Update</a>
                    <a class="btn btn-sm btn-default" ng-click="dismissDialog()">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>
